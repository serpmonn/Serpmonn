# ๐ ะัััััะน ััะฐัั: API Perfluence ะดะปั ะฟัะพะผะพะบะพะดะพะฒ (ะะตะทะพะฟะฐัะฝะฐั ะฐััะธัะตะบัััะฐ)

## ๐ ะงัะพ ะธัะฟัะฐะฒะปะตะฝะพ

โ **API ะบะปัั Perfluence** ัะตะฟะตัั ััะฐะฝะธััั ะฝะฐ ัะตัะฒะตัะต, ะฐ ะฝะต ะฝะฐ ััะพะฝัะตะฝะดะต  
โ **ะะตะทะพะฟะฐัะฝะฐั ะฐััะธัะตะบัััะฐ** - ััะพะฝัะตะฝะด ะพะฑัะฐัะฐะตััั ัะพะปัะบะพ ะบ ะฝะฐัะตะผั API  
โ **ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต** - ะฟัะพะผะพะบะพะดั ะพะฑะฝะพะฒะปััััั ะบะฐะถะดัะต 30 ะผะธะฝัั  
โ **ะกัะฐัะธััะธะบะฐ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ** - ะบะพะปะธัะตััะฒะพ ะฐะบัะธะฒะฝัั/ะธััะตะบัะธั ะฟัะพะผะพะบะพะดะพะฒ  
โ **ะฃะผะฝะฐั ัะธะปัััะฐัะธั** - ะฟะพะธัะบ ะธ ะบะฐัะตะณะพัะธะทะฐัะธั ะฟะพ ัะธะฟั ะฟัะตะดะปะพะถะตะฝะธั  
โ **ะขะพะฟ-ะพััะตัั** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะฒัะดะตะปะตะฝะธะต ะปัััะธั ะฟัะตะดะปะพะถะตะฝะธะน  
โ **ะฃะฒะตะดะพะผะปะตะฝะธั** - ััะฐััั ะพะฑะฝะพะฒะปะตะฝะธั ะธ ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ  

## ๐๏ธ ะะพะฒะฐั ะฐััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   ะคัะพะฝัะตะฝะด      โ    โ   ะะฐั ะฑัะบะตะฝะด     โ    โ  API Perfluence โ
โ   (ะัะฐัะทะตั)     โโโโโบโ   /api/promocodesโโโโโบโ  (ะกะตะบัะตัะฝัะน     โ
โ                 โ    โ                  โ    โ   ะบะปัั)         โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะะดะต ะพัะพะฑัะฐะถะฐะตััั ััะฐัะธััะธะบะฐ

ะกัะฐัะธััะธะบะฐ ะพัะพะฑัะฐะถะฐะตััั ะฒ **ัะตะบัะธะธ "ะกัะฐัะธััะธะบะฐ ะธ ัะฟัะฐะฒะปะตะฝะธะต"** ะฝะฐ ัััะฐะฝะธัะต ะฟัะพะผะพะบะพะดะพะฒ:

- **ะัะตะณะพ ะฟัะพะผะพะบะพะดะพะฒ** - ะพะฑัะตะต ะบะพะปะธัะตััะฒะพ ะทะฐะณััะถะตะฝะฝัั ะฟัะพะผะพะบะพะดะพะฒ
- **ะะบัะธะฒะฝัั** - ะฟัะพะผะพะบะพะดั, ะบะพัะพััะต ะตัะต ะฝะต ะธััะตะบะปะธ
- **ะััะตะบัะธั** - ะฟัะพะผะพะบะพะดั ั ะธััะตะบัะธะผ ััะพะบะพะผ ะดะตะนััะฒะธั
- **ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต** - ะฒัะตะผั ะฟะพัะปะตะดะฝะตะณะพ ะพะฑะฝะพะฒะปะตะฝะธั ะดะฐะฝะฝัั

## ๐ ะะฐะบ ะฟัะพะฒะตัะธัั

1. **ะะฐะฟัััะธัะต ะฑัะบะตะฝะด**: `npm start`
2. **ะัะบัะพะนัะต ัััะฐะฝะธัั ะฟัะพะผะพะบะพะดะพะฒ**: `/frontend/promo-codes-and-discounts/promokody-skidki.html`
3. **ะัะพะฒะตัััะต ััะฐัะธััะธะบั** - ะดะพะปะถะฝั ะพัะพะฑัะฐะถะฐัััั ัะตะฐะปัะฝัะต ัะธััั ะฒะผะตััะพ "0"
4. **ะะฐะถะผะธัะต "ะะฑะฝะพะฒะธัั"** - ะดะปั ะฟัะธะฝัะดะธัะตะปัะฝะพะณะพ ะพะฑะฝะพะฒะปะตะฝะธั ะดะฐะฝะฝัั
5. **ะัะบัะพะนัะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ** - ะดะปั ะฟัะพัะผะพััะฐ ะปะพะณะพะฒ API

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต API

ะะปั ะฟัะพะฒะตัะบะธ ัะฐะฑะพัั API ะธัะฟะพะปัะทัะนัะต ัะตััะพะฒัั ัััะฐะฝะธัั:
`/frontend/promo-codes-and-discounts/test-api.html`

**ะะพัััะฟะฝัะต ัะตััั:**
- โ ะะพะดะบะปััะตะฝะธะต ะบ API
- โ ะะฐะณััะทะบะฐ ะฟัะพะผะพะบะพะดะพะฒ
- โ ะะฝะฐะปะธะท ััััะบัััั ะดะฐะฝะฝัั
- โ ะขะตัั ัะธะปัััะฐัะธะธ
- โ ะัะพัะผะพัั ััะฐัะธััะธะบะธ
- โ ะัะธะฝัะดะธัะตะปัะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต
- โ ะะพะปััะตะฝะธะต ะบะฐัะตะณะพัะธะน

## ๐ง API Endpoints

- **GET** `/api/promocodes` - ะฟะพะปััะตะฝะธะต ะฒัะตั ะฟัะพะผะพะบะพะดะพะฒ
- **GET** `/api/promocodes/stats` - ะฟะพะปััะตะฝะธะต ััะฐัะธััะธะบะธ
- **POST** `/api/promocodes/refresh` - ะฟัะธะฝัะดะธัะตะปัะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต
- **GET** `/api/promocodes/categories` - ะฟะพะปััะตะฝะธะต ะบะฐัะตะณะพัะธะน

## ๐ ะกัััะบัััะฐ ะพัะฒะตัะฐ API

```json
{
    "status": "success",
    "data": [
        {
            "id": "abc123",
            "title": "ะะฐะทะฒะฐะฝะธะต ะฟัะพะผะพะบะพะดะฐ",
            "description": "ะะฟะธัะฐะฝะธะต",
            "promocode": "ะะะ123",
            "discount_percent": 20,
            "category": "ะตะดะฐ",
            "is_top": true,
            "valid_until": "2025-12-31T23:59:59Z"
        }
    ],
    "stats": {
        "total": 50,
        "active": 45,
        "expired": 5,
        "lastUpdate": "2025-01-19T12:00:00.000Z"
    }
}
```

## ๐ ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

- **`loadPromocodesFromAPI()`** - ะทะฐะณััะทะบะฐ ะดะฐะฝะฝัั ะธะท ะฝะฐัะตะณะพ API
- **`refreshPromocodes()`** - ะฟัะธะฝัะดะธัะตะปัะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต
- **`renderPromocodes()`** - ะพัะพะฑัะฐะถะตะฝะธะต ะฟัะพะผะพะบะพะดะพะฒ
- **`updateStats()`** - ะพะฑะฝะพะฒะปะตะฝะธะต ััะฐัะธััะธะบะธ
- **`startAutoUpdate()`** - ะทะฐะฟััะบ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะพะฑะฝะพะฒะปะตะฝะธั

## โ๏ธ ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั

โ **API ะฝะตะดะพัััะฟะตะฝ** - ะฟัะพะฒะตัััะต, ะทะฐะฟััะตะฝ ะปะธ ะฑัะบะตะฝะด  
โ **ะัะธะฑะบะฐ 500** - ะฟัะพะฒะตัััะต ะปะพะณะธ ัะตัะฒะตัะฐ  
โ **CORS ะพัะธะฑะบะฐ** - ะฟัะพะฒะตัััะต ะฝะฐัััะพะนะบะธ CORS ะฒ ะฑัะบะตะฝะดะต  
โ **ะััััะต ะดะฐะฝะฝัะต** - ะฟัะพะฒะตัััะต ะดะพัััะฟะฝะพััั API Perfluence  

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

- [ ] ะัะพัะตััะธัะพะฒะฐัั ะฝะฐ ะฟัะพะดะฐะบัะตะฝะต
- [ ] ะะฐัััะพะธัั ะผะพะฝะธัะพัะธะฝะณ ะพัะธะฑะพะบ
- [ ] ะะพะฑะฐะฒะธัั fallback ะฝะฐ ะปะพะบะฐะปัะฝัะต ะดะฐะฝะฝัะต
- [ ] ะะตะฐะปะธะทะพะฒะฐัั WebSocket ะดะปั real-time ะพะฑะฝะพะฒะปะตะฝะธะน

## ๐ ะคะฐะนะปั ะดะปั ะฟัะพะฒะตัะบะธ

- **ะัะบะตะฝะด**: `backend/promocodes/promocodesRoutes.mjs`
- **ะคัะพะฝัะตะฝะด**: `frontend/promo-codes-and-discounts/promokody-skidki.js`
- **ะกะตัะฒะตั**: `backend/server.mjs` (ัััะพะบะฐ ั `/api/promocodes`)
- **ะขะตััั**: `frontend/promo-codes-and-discounts/test-api.html`

---

**๐ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั! ะะตะทะพะฟะฐัะฝะฐั ะฐััะธัะตะบัััะฐ ัะตะฐะปะธะทะพะฒะฐะฝะฐ!**
<script type="module" src="/frontend/scripts/menu-loader.js" defer></script>                                                                                                              {# Загрузка меню #}
<script type="module" src="/frontend/scripts/scripts.js" defer></script>                                                                                                                  {# Общие скрипты страницы #}
<script src="/frontend/scripts/mobile-enhancements.js" defer></script>                                                                                                                     {# Улучшения для мобильных #}
<script async src="https://ad.mail.ru/static/ads-async.js"></script>                                                                                                                       {# Асинхронная загрузка рекламы #}
<script>                                                                                                                                                                                     {# Хук для скрытия пустых рекламных блоков #}
  function handleIns(ins){                                                                                                                                                                   // Обработка одного блока <ins>
    if (!ins || ins.__handled) return; ins.__handled = true;                                                                                                                                 // Пропускаем уже обработанные
    setTimeout(function(){                                                                                                                                                                   // Даем время подгрузиться iframes
      var has = !!ins.querySelector("iframe");                                                                                                                                             // Проверяем наличие iframe
      if (!has) { (window.MRGtag=window.MRGtag||[]).push({}); }                                                                                                                              // Триггер повторной инициализации
      setTimeout(function(){ if (!ins.querySelector("iframe")) { var p=ins.closest(".ad-top-banner,.ad-leaderboard,.promo-ad-inline,#mobile-anchor-ad"); if(p) p.style.display='none'; } }, 2000); // Если так и нет iframe — скрываем контейнер
    }, 2000);                                                                                                                                                                                // Задержка 2 секунды
  }
  document.querySelectorAll("ins.mrg-tag").forEach(handleIns);                                                                                                                             // Применяем ко всем рекламным блокам
  var mo = new MutationObserver(function(muts){                                                                                                                                              // Следим за динамическими вставками
    muts.forEach(function(m){ m.addedNodes && m.addedNodes.forEach(function(n){ if(n.querySelectorAll){ n.querySelectorAll("ins.mrg-tag").forEach(handleIns); } }); });                    // Обрабатываем появляющиеся узлы
  });                                                                                                                                                                                        // Конфигурируем наблюдатель
  mo.observe(document.documentElement,{childList:true,subtree:true});                                                                                                                        // Наблюдаем весь документ
})();                                                                                                                                                                                        // Немедленно исполняемая функция
</script>
